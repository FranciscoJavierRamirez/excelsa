---
// Definimos el tipo para los testimonios
type Testimonial = {
  name: string;
  diagnosis: string;
  treatment: string;
  process: string;
  result: string;
  image: {
    avif: string;
    webp: string;
    jpg?: string;
    png?: string;
    alt: string;
  };
};

// Propiedades del componente
interface Props {
  testimonials: Testimonial[];
}

const { testimonials } = Astro.props;
---

<section class="py-20 bg-gradient-to-b from-blue-50 to-white relative overflow-hidden">
  <!-- Elementos decorativos de fondo -->
  <div class="absolute top-0 right-0 w-64 h-64 rounded-full bg-teal-50 opacity-70 translate-x-1/3 -translate-y-1/3"></div>
  <div class="absolute bottom-0 left-0 w-96 h-96 rounded-full bg-blue-50 opacity-70 -translate-x-1/3 translate-y-1/3"></div>
  
  <div class="container mx-auto px-4 relative z-10">
    <div class="text-center mb-16">
      <span class="inline-block bg-gradient-to-r from-blue-500 to-teal-400 text-white text-sm font-medium px-4 py-1 rounded-full mb-4">TESTIMONIOS</span>
      <h2 class="text-4xl font-bold mb-4 bg-gradient-to-r from-blue-500 to-teal-400 text-transparent bg-clip-text">Transformando Vidas</h2>
      <div class="w-24 h-1 bg-gradient-to-r from-blue-500 to-teal-400 mx-auto mb-6 rounded-full"></div>
      <p class="text-gray-600 text-lg max-w-3xl mx-auto">
        Conoce historias reales de personas que han transformado su salud con nuestro enfoque terapéutico integral.
      </p>
    </div>
    
    <!-- Nueva estructura de tarjetas inspirada en las tarjetas de equipo -->
    <div class="grid md:grid-cols-2 gap-10 max-w-6xl mx-auto">
      {testimonials.map((testimonial) => (
        <article class="bg-white rounded-xl shadow-lg overflow-hidden transform transition-all hover:shadow-2xl hover:-translate-y-2 duration-300 flex flex-col h-full relative group">
          <!-- Cabecera de la tarjeta con gradiente y nombre -->
          <div class="bg-gradient-to-r from-blue-500 to-teal-400 p-4 text-white">
            <h3 class="text-2xl font-bold text-white">{testimonial.name}</h3>
          </div>
          
          <!-- Imagen en la parte superior con mejor presentación -->
          <div class="relative pt-[70%] overflow-hidden border-b border-gray-100">
            <div class="absolute inset-0 bg-gradient-to-tr from-blue-50 to-teal-50 group-hover:opacity-80 transition-opacity duration-300"></div>
            <picture>
              <source srcset={testimonial.image.avif} type="image/avif" />
              <source srcset={testimonial.image.webp} type="image/webp" />
              <img 
                src={testimonial.image.jpg || testimonial.image.png} 
                alt={testimonial.image.alt} 
                class="absolute top-0 left-0 w-full h-full object-cover transform transition-transform duration-700 group-hover:scale-110"
                style="object-position: center 30%; object-fit: contain; padding: 1rem;"
              />
            </picture>
            <!-- Elementos decorativos -->
            <div class="absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-blue-200/40 to-white/0 rounded-full -mr-12 -mt-12 opacity-50 group-hover:opacity-70 transition-opacity duration-300"></div>
            <div class="absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-teal-200/40 to-white/0 rounded-full -ml-16 -mb-16 opacity-50 group-hover:opacity-70 transition-opacity duration-300"></div>
          </div>
          
          <!-- Contenido principal -->
          <div class="p-6 flex-grow space-y-4">
            <div class="bg-blue-50 p-4 rounded-lg transition-all duration-300 hover:shadow-md">
              <h4 class="font-bold text-blue-600 mb-1">Diagnóstico</h4>
              <p class="text-gray-700">{testimonial.diagnosis}</p>
            </div>
            
            <div class="bg-teal-50 p-4 rounded-lg transition-all duration-300 hover:shadow-md">
              <h4 class="font-bold text-teal-600 mb-1">Tratamiento</h4>
              <p class="text-gray-700">{testimonial.treatment}</p>
            </div>
            
            <div class="bg-blue-50 p-4 rounded-lg transition-all duration-300 hover:shadow-md">
              <h4 class="font-bold text-blue-600 mb-1">Proceso</h4>
              <p class="text-gray-700">{testimonial.process}</p>
            </div>
          </div>
          
          <!-- Resultados en la parte inferior -->
          <div class="bg-gradient-to-r from-blue-100 to-teal-100 p-5 border-t-2 border-blue-200">
            <h4 class="font-bold text-blue-700 mb-2">Resultado</h4>
            <p class="text-gray-700">{testimonial.result}</p>
          </div>
          
          <!-- Elementos decorativos en las esquinas -->
          <div class="absolute top-0 left-0 w-5 h-5 border-t-2 border-l-2 border-blue-200 rounded-tl-lg"></div>
          <div class="absolute top-0 right-0 w-5 h-5 border-t-2 border-r-2 border-blue-200 rounded-tr-lg"></div>
          <div class="absolute bottom-0 left-0 w-5 h-5 border-b-2 border-l-2 border-blue-200 rounded-bl-lg"></div>
          <div class="absolute bottom-0 right-0 w-5 h-5 border-b-2 border-r-2 border-blue-200 rounded-br-lg"></div>
        </article>
      ))}
    </div>
  </div>
</section>
