---
// MobileMenu.astro
import Icon from "./Icon.astro";
import Logo from "./Logo.astro";
import { getThemeColors } from '../../utils/colorThemes';

// Recibir los items de navegación y la ruta actual
const { navItems = [] } = Astro.props;
const currentPath = Astro.url.pathname;

// Obtener colores de la marca principal
const brandColors = getThemeColors('brand');
---

<div class="relative">
  <button id="mobile-menu-button" class="p-2 text-gray-700 hover:text-blue-600 transition-colors">
    <Icon name="menu" class="w-6 h-6" />
  </button>

  <div id="mobile-menu" class="hidden fixed inset-0 bg-white z-50 overflow-y-auto">
    <div class="container mx-auto px-4 py-8">
      <div class="flex justify-between items-center mb-8">
        <Logo />
        <button id="close-menu" class="p-2 text-gray-700 hover:text-blue-600 transition-colors">
          <Icon name="close" class="w-6 h-6" />
        </button>
      </div>

      <nav class="flex flex-col space-y-1">
        {navItems.map((item) => (
          <div class="mobile-nav-item">
            <div class="flex justify-between items-center py-2">
              <a 
                href={item.url}
                class={`text-gray-700 hover:text-blue-600 transition-colors ${currentPath === item.url ? brandColors.text : ''}`}
              >
                {item.title}
              </a>
            </div>
          </div>
        ))}
        
        <a href="https://excelsa.site.agendapro.com/cl/sucursal/11444" 
           class={`${brandColors.buttonPrimary} mt-4 px-4 py-2 rounded-lg transition-colors text-center text-white`}>
          Reservar Cita
        </a>
      </nav>
    </div>
  </div>
</div>

<script>
  const menuButton = document.getElementById('mobile-menu-button');
  const closeButton = document.getElementById('close-menu');
  const mobileMenu = document.getElementById('mobile-menu');

  // Abrir/cerrar menú móvil
  menuButton?.addEventListener('click', () => {
    mobileMenu?.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  });

  closeButton?.addEventListener('click', () => {
    mobileMenu?.classList.add('hidden');
    document.body.style.overflow = '';
  });
</script> 