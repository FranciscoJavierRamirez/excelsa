---
// src/components/common/Header.astro
import Logo from './Logo.astro';
import MobileMenu from './MobileMenu.astro';
import { getThemeColors } from '../../utils/colorThemes';

// Determinar la página actual para resaltar el menú activo
const currentPath = Astro.url.pathname;

// Obtener colores de la marca principal
const brandColors = getThemeColors('brand');

// Función para verificar si un enlace está activo
const isActive = (path) => {
  if (path === '/') {
    return currentPath === '/';
  }
  return currentPath.startsWith(path);
};

// Estructura de navegación principal
const mainNavItems = [
  { title: "Inicio", url: "/" },
  { title: "Nosotros", url: "/nosotros" },
  { title: "Servicios", url: "/servicios" },
  { title: "Imágenes", url: "/imagenes" },
  { title: "Metodología", url: "/metodologia" },
  { title: "Equipo", url: "/equipo" },
  { title: "Testimonios", url: "/testimonios" },
  { title: "Cursos", url: "/cursos" },
  { title: "Contacto", url: "/contacto"}
];
---

<header class="fixed top-0 left-0 right-0 bg-white shadow-md z-50 transition-shadow duration-300">
  <div class="container mx-auto px-4">
    <nav class="flex items-center justify-between h-20">
      <a href="/" class="flex items-center">
        <Logo />
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center space-x-1">
        {mainNavItems.map(item => (
          <div class="relative">
            <a 
              href={item.url}
              class={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${
                isActive(item.url) 
                  ? brandColors.activeClasses 
                  : `text-gray-700 ${brandColors.hoverText} ${brandColors.hoverBg}`
              }`}
            >
              {item.title}
            </a>
          </div>
        ))}
        
        <a 
          href="https://excelsa.site.agendapro.com/cl/sucursal/11444"
          target="_blank" 
          rel="noopener noreferrer" 
          class={`ml-2 ${brandColors.buttonPrimary} px-4 py-2 rounded-full text-sm font-medium shadow hover:shadow-md transition-all`}
        >
          Reservar Cita
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <div class="lg:hidden">
        <MobileMenu navItems={mainNavItems} />
      </div>
    </nav>
  </div>
</header>

<script>
  // Script para hacer el header sticky con sombra al hacer scroll
  document.addEventListener('DOMContentLoaded', function() {
    const header = document.querySelector('header');
    
    if (header) {
      window.addEventListener('scroll', () => {
        if (window.scrollY > 10) {
          header.classList.add('shadow-lg');
        } else {
          header.classList.remove('shadow-lg');
        }
      });
    }
  });
</script>